#!/usr/bin/env ruby

require 'rubygems'
require 'bundler'
Bundler.require
Dotenv.load

Dir["./lib/*.rb"].each { |file| require file }

# p Extract.syllables('artesonado')


client = Syllables.new("todo")
client.process
p client

syllables => {:text => '', :stressed => true}



# thing  = Thing.save({:name => "Hola Coffee", :url => "https://www.google.com/maps/place/Hola+Coffee/@40.4070207,-3.7012775,17z/data=!3m1!4b1!4m11!1m5!8m4!1e1!2s114312892379583351912!3m1!1e1!3m4!1s0xd42262c134c66cf:0x8f39f40363d61cd3!8m2!3d40.4070207!4d-3.6990835"})
# review = Review.save({:thing_id => thing.id, :text => "Es una gran cafeteria, me mola todo.", :author => "Marce"})
# sentence = Sentence.save({:review_id => review.id, :text => "Es una gran cafeteria"})

# Syllables
# TODO: Needs to strip more than spaces
# require './lib/syllables.rb'
# source = "el camión iba muy rápido"
# word = Syllables.new(source)
# word.process
# output = Array.new
# word.syllables.size.times do |position|
#   starting = word.syllables[position]
#   ending   = word.syllables[position+1].nil? ? -1 : word.syllables[position+1] - 1
#   output <<  source.slice(starting..ending)
# end
# puts "#{output.join('-').delete(' ')} (#{word.num_syl})"

# Maps
# Types https://developers.google.com/places/web-service/supported_types
# params = {:query => 'hola cafe madrid', :type => 'cafe', :key => ENV['GOOGLE_MAPS_API_KEY']}
# response = Curl.get('https://maps.googleapis.com/maps/api/place/textsearch/json', params)
# place_id = JSON.parse(response.body_str)['results'][0]['place_id']
# params = {:placeid => place_id, :key => ENV['GOOGLE_MAPS_API_KEY']}
# response = Curl.get('https://maps.googleapis.com/maps/api/place/details/json', params)
# puts response.body_str

# file = File.open("test/fixtures/google-maps-places.json", "rb")
# contents = file.read
# json = JSON.parse(contents)
# puts json['result']['reviews'].size
