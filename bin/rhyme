#!/usr/bin/env ruby

require 'rubygems'
require 'bundler'
Bundler.require
Dotenv.load

Dir["./lib/*.rb"].each { |file| require file }

# sentences = Sentence.where(:syllables_count => 0..100).group(:rhyme_consonance)

sentences = Sentence.where(:syllables_count => 0..100).where(Sequel.like(:rhyme_consonance, '%ir%'))

rhyme = "%a|a%"
sentences = Sentence.where(:syllables_count => 6)
                    .where(Sequel.like(:rhyme_assonance, rhyme))
                    .where(:sentiment_score => 0...1)
                    .where{sentiment_magnitude > 0.2}
                    .order(Sequel.desc(:sentiment_score))

# sentences = Sentence.where(Sequel.like(:text, '%servicio%') )

sentences.each do |sentence|
  printf "%-30s %s\n", '%02d  ' % sentence.syllables_count + sentence.text, "(#{Review.first(:id => sentence.review_id).author})"
end
