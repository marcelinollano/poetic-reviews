#!/usr/bin/env ruby

require 'rubygems'
require 'bundler'
Bundler.require
Dotenv.load

Dir["./lib/*.rb"].each { |file| require file }

# sentences = Sentence.where(:syllables_count => 0..100).group(:rhyme_consonance)

sentences = Sentence.where(:syllables_count => 0..100).where(Sequel.like(:rhyme_consonance, '%ir%'))

rhyme = "%a|i%"

sentences = Sentence.where(:syllables_count => 20)
                    .where(Sequel.like(:rhyme_assonance, rhyme))
                    .where(:sentiment_score => 0...1)
                    .where{sentiment_magnitude > 0}
                    .order(Sequel.desc(:sentiment_score)).all

# sentences = Sentence.where(Sequel.like(:text, '%servicio%') )

2.times.each do |i|
  unless sentences[i].nil?
    printf "%-40s %s\n", '%02d  ' % sentences[i].syllables_count + sentences[i].text, "(#{Review.first(:id => sentences[i].review_id).author})"
  end
end
